一个页面文件，两个js

注意事项：
1）	页面开头要引入两个js
<script src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=js/jquery-1.7.1.js&contentType=text" type="text/javascript"></script>
<script src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=js/jqueryWaitAnimation.js&contentType=text" type="text/javascript"></script>

2）	Style要加上
	<style type="text/css">
		 .loading-indicator {
			   background: url('/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/loading.gif&contentType=gif');
			   background-repeat: no-repeat;
			   background-position: center;
		 }
		 .loading-indicator-overlay {
			   height: 100%;
			   width: 100%;
			   background-color: #FFFFFF;
			   opacity: 0.6;
			   filter: alpha(opacity = 70);
		 }
	</style>

3）	页面里要有等待的div及图片
	<div id="loadingDiv" align="center" style="width:100%; height:100%;display:none;">
		<br /><br /><br /><br /><br /><br />
		<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&function=usage&resPath=images/loading.gif&contentType=gif" />
	</div>
4）	在需要的地方添加needShowLoading 
	<a href="#" class="needShowLoading" onclick="javascript:popupScreenChoosen('YES','/ap4saasWeb/seam/resource/pluginProcessor?serviceId=${serviceVO.serviceId}&userId=${userVO.saasUserId?c}&subscriptionInstanceId=${serviceVO.serviceInstanceId}&operationName=configuration-detail&navigationClassName=AddToCart');">${loc.CONFIGURATION_BUTTON_YES}</a>
5）	这个不可缺少
	<script type="text/javascript">
		jQuery(document).ready(
			function() {
				jQuery('a.needShowLoading').click(
				  function() {
					  jQuery('#loadingDiv').showLoading();
				  }
				);
			}	
		  );
	</script>
	其中a表示你用的是<a href=””>方式。如果是按钮，可用
		jQuery('input[type=button].needShowLoading'').click (
			function () {
				jQuery('#loadingDiv').showLoading();
			}
		);
		
=====================
例子文件：
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html>
	<head>
		<title>AP4SAAS</title>
		<link rel="stylesheet" type="text/css" href="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=css/styleUsage.css&contentType=text/css"/>
		<link rel="stylesheet" type="text/css" href="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=css/iaasAdminHome.css&contentType=text/css"/>
		<link rel="stylesheet" type="text/css" href="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=css/iaasConfirmationUsed.css&contentType=text/css"/>
		<link rel="stylesheet" type="text/css" href="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=css/iaasSlide.css&contentType=text/css"/>
		<script src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=js/jquery-1.7.1.js&contentType=text" type="text/javascript"></script>
		<script src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=js/jquery-ui-1.7.3.custom.min.js&contentType=text" type="text/javascript"></script>
		<script src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=js/IaaSConfigurationHomeUsed.js&contentType=text" type="text/javascript"></script>
		<script src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=js/jqueryWaitAnimation.js&contentType=text" type="text/javascript"></script>
		<style type="text/css">
			.loading-indicator {
				background: url('/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/loading.gif&contentType=gif');
				background-repeat: no-repeat;
				background-position: center;
			}
			.loading-indicator-overlay {
				height: 100%;
				width: 100%;
				background-color: #FFFFFF;
				opacity: 0.6;
				filter: alpha(opacity = 70);
			}
		</style>
	</head>

	<body>
		<input type="hidden" id="hiddenInvalidDataInExtraCost" value="${loc.CONFIGURATION_LABEL_INVALID_EXTRA_COST_EXIST}"/>
		<input type="hidden" id="hiddenInvalidDataWhenCAIsText" value="${loc.CONFIGURATION_MSG_INVALID_DATA_WHEN_CA_IS_TEXT}"/>
		<input type="hidden" id="hiddenConfirmOrderMsg" value="${loc.CONFIGURATION_CONFIRM_ORDER_MSG}"/>
		<input type="hidden" id="hiddenPendingCAExistingMsg" value="${loc.CONFIGURATION_MSG_PLEASE_WAIT_DUE_TO_PENDING}"/>
		<input type="hidden" id="hiddenMsgWhenSlideLTDefaultValue" value="${msgWhenSlideLTDefaultValue}"/>
		<input type="hidden" id="hiddenMsgReduceDiskDisabled" value="${msgReduceDiskDisable}"/>
		<input type="hidden" id="hiddenMsgChangeDiskDisabledDueToSnapshot" value="${msgChangeDiskDisabledDueToSnapshot}"/>
		<#assign supportedFeatures_reduceDisk="false">
		<#assign supportedFeatures_changeDiskAllowedIfSnapshot="false">
		<#if supportedFeatures?exists>
			<#assign supportedFeatures_reduceDisk= supportedFeatures.reduceDisk >
			<#assign supportedFeatures_changeDiskAllowedIfSnapshot=supportedFeatures.changeDiskAllowedIfSnapshot >
		</#if>
		<script type="text/javascript">
			var boolMsgPopped = false;
		</script>	
		<#if chargeableBillingCycle =="">
			<input type="hidden" id="hiddenBillingCycleIsBlank" value="true"/>
		<#else>
			<input type="hidden" id="hiddenBillingCycleIsBlank" value="false"/>
		</#if>
		<div class="iaas_total" id="iaasAdministrateTotal">
			<div class="iaas_catclear">
				<div class="iaas_catName">
					<h1> ${loc.CONFIGURATION_SCREEN_TITLE}</h1>
					<table>
						<tr>
							<td>
								<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&function=usage&resPath=images/${conf.SERVER_LOGO}" />
							</td>
							<td>
								<b>${loc.CONFIGURATION_FOR_SUBSCRIPTION}:</b> ${serviceVO.serviceDisaplyName}
							</td>
						</tr>
					</table>
				</div>
			</div>

			<br/>
			<div id="iaas_approval_logic">
				<div class="iaas_prod_setup_container" style="margin-left:15px;">
					<table>
						<tr>
							<td>
								<div class="iaas_approval_logic_container">
									<div class="iaas_approval_logic_selection" id="iaas_approval_logic_selection">
										<#if solutionType == "infra">
											<table cellpadding="2">
												<tr><td colspan="2"><div id="titleCateg">${loc.CONFIGURATION_TITLE_CATEGORY}</div></td></tr>
												<tr>
													<td >${loc.ADMINISTRATION_SCREEN_SERVER_GROUP}:</td>
													<td>
														<select id="ddlObjectGroups" onchange="javascript:objectGroupChanged();">
															<#if objectGroups?exists>
																<#list objectGroups as varGroup>
																	<#if varGroup_index == 0>
																		<option value="${varGroup.title}" selected><font size="3" color="grey">${varGroup.title}&nbsp;&nbsp;</font><font size="2" color="grey">(${varGroup.description})</font></option>
																	<#else>
																		<option value="${varGroup.title}"><font size="3" color="grey">${varGroup.title}&nbsp;&nbsp;</font><font size="2" color="grey">(${varGroup.description})</font></option>
																	</#if>
																</#list>
															</#if>
														</select>
													</td>
												</tr>
											</table>
										<#else>
											<div id="titleCateg">${loc.CONFIGURATION_TITLE_CATEGORY}</div>
											<div class="iaas_approval_logic_selection" id="noneInfraHiddenGroupDiv" style="display:none;">
											<table cellpadding="2">
												<tr><td colspan="2"></td></tr>
												<tr>
													<td >${loc.ADMINISTRATION_SCREEN_SERVER_GROUP}:</td>
													<td>
														<select id="ddlObjectGroups" >
															<#if objectGroups?exists>
																<#list objectGroups as varGroup>
																	<#if varGroup_index == 0>
																		<option value="${varGroup.title}" selected><font size="3" color="grey">${varGroup.title}&nbsp;&nbsp;</font><font size="2" color="grey">(${varGroup.description})</font></option>
																	<#else>
																		<option value="${varGroup.title}"><font size="3" color="grey">${varGroup.title}&nbsp;&nbsp;</font><font size="2" color="grey">(${varGroup.description})</font></option>
																	</#if>
																</#list>
															</#if>
														</select>
													</td>
												</tr>
											</table>
											</div>
										</#if>
										
										<#list objectGroups as group>
											<#if group.type == "servergroup">
												<div class="iaas_stotal" id="serverGroupId_${group.title}" style="display:none;">
													<#if solutionType == "infra">
														<table with="100%">
															<tr>
																<td>
																	<font size="4">${loc.ADMINISTRATION_SCREEN_SERVER_GROUP}</font>:
																</td>
																<td>
																	<font size="3" color="grey">${group.title}&nbsp;&nbsp;</font><font size="2" color="grey">(${group.description})   </font>
																</td>
															</tr>
														</table>
													</#if>
													
													<!-- display slides for serverGroup level -->
													<#if group.serverGroupParameters?exists>
														<form name="${group.id}" id="${group.id}">
														<table border="0" cellpadding="0" cellspacing="0">
														<#list group.serverGroupParameters as groupParam>
															<#assign groupAddOn4Slide=groupParam.id>
															<#if groupParam.possibleValue?size >0 >
																<tr>
																	<td style="width:135px;"></td>
																	<td colspan="2" style="width:235px;">
																		<table border="0" cellpadding="0" cellspacing="0" width="215px" id="tb_group_slide_values_${groupAddOn4Slide}_${group_index}">
																			<tr>
																				<td>test</td>
																			</tr>
																		</table>
																	</td>
																</tr>
																
																<tr>
																	<td style="width:135px;"> <a  title="${addon.description}">${addon.title}</a></td>
																	<td style="width:5px;">:</td>
																	<td style="width:230px;">
																		<div id="GROUPSLIDE_${groupAddOn4Slide}_${group_index}" style="width:200px;"/>
																	
																		<script type="text/javascript">
																			$(function() {
																				var groupTrueValues_${groupAddOn4Slide}_${group_index} = new Array();
																				<#list groupParam.possibleValue as enumval>
																					groupTrueValues_${groupAddOn4Slide}_${group_index}.push(${enumval});
																				</#list>

																				var groupValues_${groupAddOn4Slide}_${group_index} = new Array();
																				for (var i = 1; i <= groupTrueValues_${groupAddOn4Slide}_${group_index}.length; i++) {
																					groupValues_${groupAddOn4Slide}_${group_index}.push(i);
																				}
																				
																				var sliderGroup = $("#GROUPSLIDE_${groupAddOn4Slide}_${group_index}").slider({
																					orientation: 'horizontal',
																					range: 'min',
																					min: groupValues_${groupAddOn4Slide}_${group_index}[0],
																					max: groupValues_${groupAddOn4Slide}_${group_index}[groupValues_${groupAddOn4Slide}_${group_index}.length-1],
																					value:calcuCursorPositionInSlide(groupTrueValues_${groupAddOn4Slide}_${group_index}, "${groupParam.value}"),
																																											
																					slide: function(event, ui) { 
																						var includeLeft = event.keyCode != $.ui.keyCode.RIGHT;
																						var includeRight = event.keyCode != $.ui.keyCode.LEFT;
																						
																						var value1 = findNearest(includeLeft, includeRight, ui.value,groupValues_${groupAddOn4Slide}_${group_index});
																						if (ui.value == ui.values) {
																							sliderGroup.slider('value', value1);
																						} else {
																							sliderGroup.slider('value', value1);
																						}
																						
																						$("#hiddenGroupSlideSelectedValue_${groupAddOn4Slide}_${group_index}").val(getRealValue(sliderGroup.slider('value'),groupValues_${groupAddOn4Slide}_${group_index},groupTrueValues_${groupAddOn4Slide}_${group_index}) );
																						return false;
																					},         
												
																					change: function(event, ui) {
																					}  
																				});
																			});
																		</script>
																		
																		<input type="hidden" id="hiddenGroupSlideSelectedValue_${groupAddOn4Slide}_${group_index}" value="${groupParam.value}"/>
																	</td>
																</tr>
															</#if>
														</#list>
														<tr>
															<td style="width:135px;"></td>
															<td colspan="2" style="width:235px;" align="right">
																<input type="button" name="appr_save" value="${loc.CONFIGURATION_BUTTON_ORDER}" class="iaas_appr_config" onclick="javascript: popupWindowWithType4Group(this.form, 'CONFIRM_ORDER', '${group.id}','${group.title}');" />
															</td>
														</tr>
														</table>
														</form>
													</#if>
													<!-- end of serverGroup slide displaying -->
													
													<#list group.objects as object>
													<#if solutionType == "infra">
														<div class="iaas_subtotal">
													</#if>
															<table>
																<tr>
																	<td>
																		<div>
																			<span>
																				<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&function=usage&resPath=images/server.png" />
																			</span>
																		</div>
																	</td>
																	<td>
																	    <img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&function=usage&resPath=images/vertical_separation.png" />
																	</td>
																	<td>
																		<table>
																			<#assign parameters=object.parameters>
																			<#list parameters as parameter>
																				<#if parameter.hidden?exists >
																					<#if parameter.hidden == "false" >
																						<tr>
																							<td>
																								<font size="2">${parameter.displayName}</font>:</td><td><font size="2" color="grey">${parameter.value}</font>
																							</td>
																						</tr>
																					</#if>
																				<#else>
																					<tr>
																						<td>
																							<font size="2">${parameter.displayName}</font>:</td><td><font size="2" color="grey">${parameter.value}</font>
																						</td>
																					</tr>
																				</#if>
																			</#list>
																		</table>
																	</td>
																	<td>
																		<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&function=usage&resPath=images/vertical_separation.png" />
																	</td>
																	<td>
																		<form name="${object.id}" id="${object.id}">
																			<#assign addOns=object.modifyChargeableActions>
																			<#assign addOnsize = object.modifyChargeableActions?size>
																			<!-- the proposal of retrieveing default value from APGetServiceInstanceDescription is not ready -->
																			<#assign mapActionAttrsDefaultValues4SingleServer = mapActionAttrsDefaultValues[object.id]>
																			<#assign mapRetrievedValuesForSlideDisplayFromResponse4SingleServer = mapRetrievedValuesForSlideDisplayFromResponse[object.id]>
																			<!-- original proposal for default value: defined in service plan template -->
																			<!--assign mapActionAttrsDefaultValues4SingleServer = mapActionAttrsDefaultValues-->
																			<input type="hidden" id="hiddenServerNameInfo_${group_index}_${object_index}" value="${object.title}"/>
																			<input type="hidden" id="hiddenServerGroupName_${group_index}_${object_index}" value="${group.title}"/>
																			<#if (addOns?size >0) >
																				<table border="0" cellpadding="0" cellspacing="0">
																					<#list addOns as addon>
																						<#if "${addon.type}" == "enum">
																							<#if addon.displayState == "UnModifiable">
																								
																							<#else>
																								<#assign addonIdWithoutModify=addon.id?replace("Modify-","")>
																								<tr>
																									<td style="width:135px;"></td>
																									<td colspan="2" style="width:235px;">
																										<table border="0" cellpadding="0" cellspacing="0" width="215px" id="tb_slide_values_${addonIdWithoutModify}_${group_index}_${object_index}">
																											<tr>
																												<td>t</td>
																												<td>e</td>
																												<td>s</td>
																												<td>t</td>
																											</tr>
																										</table>
																									</td>
																									<td align="left">
																										<#if chargeableBillingCycle =="">
																											&nbsp;
																											<input type="hidden" id="hiddenBillingCycleIsBlank_${addonIdWithoutModify}_${group_index}_${object_index}" value="true"/>
																										<#else>
																											${loc.CONFIGURATION_LABEL_EXTRA_COST}
																											<input type="hidden" id="hiddenBillingCycleIsBlank_${addonIdWithoutModify}_${group_index}_${object_index}" value="false"/>
																										</#if>
																									</td>
																								</tr>
																							</#if>
																						</#if>
																						
																						<tr>
																						<#if "${addon.type}" == "enum">
																							<td style="width:135px;"> <a  title="${addon.description}">${addon.title}</a></td>
																							<td style="width:5px;">:</td>
																							<td style="width:230px;">
																							<#if addon.displayState == "UnModifiable">
																								<select id="${addon.id}" disabled>
																									<#list addon.possiblevalues as enumval>
																										<#if "${addon.value}" == "${enumval}" >
																											<option selected value="${enumval}">${enumval}</option>
																										<#else>
																											<option  value="${enumval}">${enumval}</option>
																										</#if>
																									</#list>
																								</select>
																								<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&function=usage&resPath=images/loadingAnimation.gif" />
																							<#else>
																								<div id="SLIDE_${addonIdWithoutModify}_${group_index}_${object_index}" style="width:200px;"/>
																								
																								<script type="text/javascript">
	                                                                        						$(function() {
	                                                                        						
		                                                                        						var arrTieredfee_${addonIdWithoutModify}_${group_index}_${object_index} = new Array();
																									
																										<#if "${addon.chargeableType}" == "TieredFee">
																											<#assign mapTieredFeeInfo4SingleServer = tieredFeeInfo[object.id]>
																											<#assign tieredFeeVOs = mapTieredFeeInfo4SingleServer[addon.id]>
																											<#list tieredFeeVOs as tfVO>
																												//push all tiered fee into the array
																												//format: arrTieredfee_CPU_0_0
																												arrTieredfee_${addonIdWithoutModify}_${group_index}_${object_index}.push(new jsTieredFeeVO("${(tfVO.startRange)?c}", "${(tfVO.endRange)?c}", "${tfVO.price}"));
																											</#list>
																										</#if>
																									
	                                                                        							//trueValues_xxx_0_0: 128,256,512,1024
	                                                                        							var trueValues_${addonIdWithoutModify}_${group_index}_${object_index} = new Array();
	                                                                        							<#list addon.possiblevalues as enumval>
					                                                                        				<#if enumval == 'unchanged'>
					                                                                        					//do nothing when it is unchanged
					                                                                        				<#else>
																												trueValues_${addonIdWithoutModify}_${group_index}_${object_index}.push(${enumval});
																											</#if>
																										</#list>
																										
																										//values_xxx_0_0: 1,2,3,4
																										var values_${addonIdWithoutModify}_${group_index}_${object_index} = new Array();
																										for (var i = 1; i <= trueValues_${addonIdWithoutModify}_${group_index}_${object_index}.length; i++) {
																											values_${addonIdWithoutModify}_${group_index}_${object_index}.push(i);
																										}
																										
																										var myGeneratedInnerHTMLForSlideTable_${addonIdWithoutModify}_${group_index}_${object_index} = createAWellLookingTableForSLide("tb_slide_values_${addonIdWithoutModify}_${group_index}_${object_index}",trueValues_${addonIdWithoutModify}_${group_index}_${object_index});
																										$("#tb_slide_values_${addonIdWithoutModify}_${group_index}_${object_index}").html(myGeneratedInnerHTMLForSlideTable_${addonIdWithoutModify}_${group_index}_${object_index});
																										
																										
																										var indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index} = 0;
																										//flag to identify whether the selected is the default one.
																										var isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "false";
																										//flag to identify which one is the default one in the slide numbers
																										var indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index} = 0;
																										var isSlideSetWithValue_${addonIdWithoutModify}_${group_index}_${object_index} = "false";
																										
																										for (var i=0;i<trueValues_${addonIdWithoutModify}_${group_index}_${object_index}.length;i++) {
																											//blank, when default value not set in Service plan template
																											if ("${mapActionAttrsDefaultValues4SingleServer[addonIdWithoutModify]}" == "") {
																												//set the first one selected?
																												indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index} = 0;
																												isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "true";
																												
																												//check which one should be selected
																												if ((""+trueValues_${addonIdWithoutModify}_${group_index}_${object_index}[i]) == "${addon.value}") {
																													indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index} = i;
																													isSlideSetWithValue_${addonIdWithoutModify}_${group_index}_${object_index} = "true";
																													if (i==0) {
																														isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "true";
																													} else {
																														isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "false";
																													}
																												}
																											} else {
																												if (trueValues_${addonIdWithoutModify}_${group_index}_${object_index}[i] == "${mapActionAttrsDefaultValues4SingleServer[addonIdWithoutModify]}") {
																													indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index} = i;
																													isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "true";
																												}
																												
																												//to find which one will be selected when the page is loaded
																												//TODO, usually, addon value often greater than/ equal to the default value 
																												if ((""+trueValues_${addonIdWithoutModify}_${group_index}_${object_index}[i]) == "${addon.value}") {
																													indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index} = i;
																													isSlideSetWithValue_${addonIdWithoutModify}_${group_index}_${object_index} = "true";
																													
																													if (indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index} == i) {
																														isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "true";
																													} else {
																														isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} = "false";
																													}
																												}
																											}
																										}
																																										
																										//set the extra cost when screen is loaded, when the default is selected, the extra cost should be 0
																										if (isDefaultValueDisplayed_${addonIdWithoutModify}_${group_index}_${object_index} == "true") {
																											//check whether the selected is same as the default one, when they are the same, set 0 to the extra cost field
																											if (indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index} == indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index}) {
																												$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val("0");
																											} else {
																												if ("${addon.chargeableType}" == "TieredFee") {
																													$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCostWhenTiredFee(values_${addonIdWithoutModify}_${group_index}_${object_index}[indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index}],values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index},arrTieredfee_${addonIdWithoutModify}_${group_index}_${object_index}) );
																												} else {
																													$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCost(values_${addonIdWithoutModify}_${group_index}_${object_index}[indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index}],values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index}) );
																												}
																											}
																										} else {
																											if ("${addon.chargeableType}" == "TieredFee") {
																												$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCostWhenTiredFee(values_${addonIdWithoutModify}_${group_index}_${object_index}[indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index}],values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index},arrTieredfee_${addonIdWithoutModify}_${group_index}_${object_index}) );
																											} else {
																												$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCost(values_${addonIdWithoutModify}_${group_index}_${object_index}[indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index}],values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index}) );
																											}
																										} 
																																																				
																										var slider = $("#SLIDE_${addonIdWithoutModify}_${group_index}_${object_index}").slider({
																											orientation: 'horizontal',
																											range: 'min',
																											min: values_${addonIdWithoutModify}_${group_index}_${object_index}[0],
																											max: values_${addonIdWithoutModify}_${group_index}_${object_index}[values_${addonIdWithoutModify}_${group_index}_${object_index}.length-1],
																											value:calcuCursorPositionInSlide(trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, "${addon.value}"),
																											start:function(event, ui) {
																												boolMsgPopped = false;
																											},
																											
																											slide: function(event, ui) { 
																												var includeLeft = event.keyCode != $.ui.keyCode.RIGHT;
																												var includeRight = event.keyCode != $.ui.keyCode.LEFT;
																												
																												//check whether it is a disk
																												if ("${addonIdWithoutModify}".toUpperCase() == "DISK") {
																													//when reduceDisk flag is false, that is to say, disable move cursor less than the current value
																													if ("${supportedFeatures_reduceDisk}" == "false") {
																														if (ui.value < (indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index} + 1)) {
																														
																															if (boolMsgPopped == false) {
																																var objMsg1 = document.getElementById("hiddenMsgReduceDiskDisabled");
																																alert(objMsg1.value);
																																boolMsgPopped = true;
																															}
																															return false;
																														}
																													}
																													
																													//when change disabled
																													if ("${supportedFeatures_changeDiskAllowedIfSnapshot}" == "false") {
																														if (ui.value == (indexOfSelected_${addonIdWithoutModify}_${group_index}_${object_index} + 1)) {
																														} else {
																															if (boolMsgPopped == false) {
																																var objMsg2 = document.getElementById("hiddenMsgChangeDiskDisabledDueToSnapshot");
																																alert(objMsg2.value);
																																boolMsgPopped = true;
																															}
																															return false;
																														}
																													}
																												}
																												
																												//disable user to move slide less than default value
																												if (ui.value < (indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index} + 1)) {
																													if (boolMsgPopped == false) {
																														var objMsg = document.getElementById("hiddenMsgWhenSlideLTDefaultValue");
																														
																														alert(objMsg.value.replace("{0}",""+trueValues_${addonIdWithoutModify}_${group_index}_${object_index}[indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index}]));
																														boolMsgPopped = true;
																													}
																													return false;
																												}
																												
																												var value = findNearest(includeLeft, includeRight, ui.value,values_${addonIdWithoutModify}_${group_index}_${object_index});
																												//alert("value:" + value);
																												if (ui.value == ui.values) {
																													slider.slider('value', value);
																												} else {
																													slider.slider('value', value);
																												}
																												
																												//check whether it is the default one
																												if ("${mapActionAttrsDefaultValues4SingleServer[addonIdWithoutModify]}" == "") {
																													if (value == 1) {
																														$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val("0");
																													} else {
																														if ("${addon.chargeableType}" == "TieredFee") {
																															$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCostWhenTiredFee(slider.slider('value'),values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index},arrTieredfee_${addonIdWithoutModify}_${group_index}_${object_index}) );
																														} else {
																															$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCost(slider.slider('value'),values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index}) );
																														}
																													}
																												} else {
																													if (trueValues_${addonIdWithoutModify}_${group_index}_${object_index}[value-1] == "${mapActionAttrsDefaultValues4SingleServer[addonIdWithoutModify]}") {
																														$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val("0");
																													} else {
																														if ("${addon.chargeableType}" == "TieredFee") {
																															$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCostWhenTiredFee(slider.slider('value'),values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index},arrTieredfee_${addonIdWithoutModify}_${group_index}_${object_index}) );
																														} else {
																															$("#txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}").val(calcExtraCost(slider.slider('value'),values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}, '${addon.chargeableMessage}',indexOfDefaultValue_${addonIdWithoutModify}_${group_index}_${object_index}) );
																														}
																													}
																												}
																												
																												$("#hiddenSlideSelectedValue_${addonIdWithoutModify}_${group_index}_${object_index}").val(getRealValue(slider.slider('value'),values_${addonIdWithoutModify}_${group_index}_${object_index},trueValues_${addonIdWithoutModify}_${group_index}_${object_index}) );
																												return false;
																											},         
						
																											change: function(event, ui) {
																											}  
																										});
	                                                                        						});
	                                                                        					</script>
	                                                                        					
	                                                                        					<!-- for slide's selected value. when cursor in slide is moved, this hidden object's value will be updated  -->
																								<input type="hidden" id="hiddenSlideSelectedValue_${addonIdWithoutModify}_${group_index}_${object_index}" value="${addon.value}"/>
																								<input type="hidden" id="hiddenBaseValue_${addonIdWithoutModify}_${group_index}_${object_index}" value="${mapActionAttrsDefaultValues4SingleServer[addonIdWithoutModify]}"/>
																								<input type="hidden" id="hiddenRetrievedSlideDisplayValueFromResponse_${addonIdWithoutModify}_${group_index}_${object_index}" value="${mapRetrievedValuesForSlideDisplayFromResponse4SingleServer[addonIdWithoutModify]}"/>
																							</#if>
																							</td>
																							
																							<td align="left">
																								<#if chargeableBillingCycle =="">
																									&nbsp;
																								<#else>
																									<!-- i18n for 1-Month -->
																									<#assign varBillingCycle = chargeableBillingCycle>
																									<#if varBillingCycle?upper_case?contains("WEEK")>
																										<#assign varBillingCycle = loc.CONFIGURATION_CHARGEABLE_BILLING_CYCLE_WEEK >
																									<#elseif varBillingCycle?upper_case?contains("DAY")>
																										<#assign varBillingCycle = loc.CONFIGURATION_CHARGEABLE_BILLING_CYCLE_DAY >
																									<#elseif varBillingCycle?upper_case?contains("MONTH")>
																										<#assign varBillingCycle = loc.CONFIGURATION_CHARGEABLE_BILLING_CYCLE_MONTH >
																									<#elseif varBillingCycle?upper_case?contains("QUARTER")>
																										<#assign varBillingCycle = loc.CONFIGURATION_CHARGEABLE_BILLING_CYCLE_QUARTER >
																									<#elseif varBillingCycle?upper_case?contains("YEAR")>
																										<#assign varBillingCycle = loc.CONFIGURATION_CHARGEABLE_BILLING_CYCLE_YEAR >
																									</#if>
																									<input type="text" id="txtExtraCost_${addonIdWithoutModify}_${group_index}_${object_index}" size="5" value="0"/> / ${varBillingCycle} 
																								</#if>
																							</td>
																						<#else>
																							<!-- when the type is not an enum, a text box should be displayed -->
																							<td style="width:135px;"><a  title="${addon.description}">${addon.title}</a></td>
																							<td style="width:5px;">:</td>
																							<td style="width:230px;"><input type="text" id="txtCAIsAText_${addon.id}_${group_index}_${object_index}" value="${addon.value}" /></td>
																							<td></td>
																						</#if>
																						</tr>
																						
																						<input type="hidden" id="hiddenCAActionStatus_${addonIdWithoutModify}_${group_index}_${object_index}" value="${addon.displayState}"/>
																						<#if addon.displayState == "UnModifiable">
																						
																						<#else>
																							<tr>
																								<td style="width:135px;">
																									<#if addon.displayState == "Pending">
																										<b>${loc.CONFIGURATION_LABEL_PENDING}</b> 
																									</#if>
																								</td>
																								<td style="width:5px;"></td>
																								<td style="width:230px;">
																									<input type="hidden" id="hiddenChargeableMessage_${addonIdWithoutModify}_${group_index}_${object_index}" value="${addon.chargeableMessage}"/>
																									<#if "${addon.chargeableType}" == "TieredFee">
																										<input type="hidden" id="hiddenChargeableTypeIsTieredFee_${addonIdWithoutModify}_${group_index}_${object_index}" value="true"/>
																										<input type="hidden" id="hiddenTieredFeeSecondStartRange_${addonIdWithoutModify}_${group_index}_${object_index}" value="10000"/>
																										<input type="hidden" id="hiddenTieredFeeSecondPrice_${addonIdWithoutModify}_${group_index}_${object_index}" value="10"/>
																									<#else>
																										<input type="hidden" id="hiddenChargeableTypeIsTieredFee_${addonIdWithoutModify}_${group_index}_${object_index}" value="false"/>
																									</#if>
																									<#if chargeableBillingCycle =="">
																										<b><font style="color: #0060B7">${loc.FREE_OF_CHARGE}</font></b>
																									<#else>
																										<b>${loc.SERVICE_CONFIG_CHARGEABLE_START_FROM}<font style="color: #0060B7">${addon.chargeableMessage}</font></b>
																									</#if>
																								</td>
																								<td></td>
																							</tr>
																							<#if addonIdWithoutModify?upper_case == "DISK">
																								<#if supportedFeatures_reduceDisk == "false"> 
																									<tr>
																										<td style="width:135px;">
																										</td>
																										<td style="width:5px;"></td>
																										<td style="width:230px;">
																											<b><font style="color: red">${labelReduceDiskDisabled}</font></b>
																										</td>
																										<td></td>
																									</tr>
																								</#if>
																								<#if supportedFeatures_changeDiskAllowedIfSnapshot == "false">
																									<tr>
																										<td style="width:135px;">
																										</td>
																										<td style="width:5px;"></td>
																										<td style="width:230px;">
																											<b><font style="color: red">${labelChangeDiskDisabledDueToSnapshot}</font></b>
																										</td>
																										<td></td>
																									</tr>
																								</#if>
																							</#if>
																						</#if>
																					</#list>
																				</table>
																			</#if>
																			<div class="iaas_approval_action">
																			
																			<#if (addOnsize > 0) >
																				<input type="button" name="appr_save" value="${loc.CONFIGURATION_BUTTON_ORDER}" class="iaas_appr_config" onclick="javascript: popupWindowWithType(this.form, 'CONFIRM_ORDER', '${object.id}');" />
																			</#if>
																			</div>
																		</form>
																	</td>
																</tr>
															</table>
														<#if solutionType == "infra">
														</div> <!-- end of iaas_subtotal -->
														</#if>
													<br/><br/>
												</#list> <!-- end of freemarker list group.objects as object  -->

											</div><!-- end of iaas_stotal -->
										</#if> <!-- end of checking whether group.type is "servergroup" -->
									</#list> <!-- end of freemarker list objectGroups as group -->
								</div>
							</div>
						</td>
					</tr>
					<tr>
						<td>
							<div class="iaas_approval_action">
								<input type="button" name="appr_refresh" value="${loc.IAAS_REFRESH}" class="iaas_appr_save" onclick="javascript:refreshAction('/ap4saasWeb/seam/resource/pluginProcessor?serviceId=${serviceVO.serviceId}&userId=${userVO.saasUserId?c}&subscriptionInstanceId=${serviceVO.serviceInstanceId}&operationName=configuration-detail&navigationClassName=LoadConfigurationHome');"/>
								<input type="button" name="appr_admin" value="${loc.IAAS_ADMIN}" class="iaas_appr_save" onclick="javascript:switchTo('/ap4saasWeb/seam/resource/pluginProcessor?serviceId=${serviceVO.serviceId}&userId=${userVO.saasUserId?c}&subscriptionInstanceId=${serviceVO.serviceInstanceId}&operationName=configuration-detail&navigationClassName=ConfigToAdmin');"/>
								<input type="button" name="appr_cancel" value="${loc.IAAS_CANCEL}" class="iaas_appr_cancel" onclick="javascript:parent.parent.close();"/>
							</div><!--getstarted_table_top end-->
						</td>
					</tr>
				</table>
			</div>
		</div>
	</div>

	<!-- div for error displaying -->
        <#if (errorMsg?exists) || (pendingMsg?exists)>
        <div id="modalWrapper" class="modalWrapper_small" style="display:none;">
            <div class="wrap_modal_top"></div>
            <div id="wrapBig" class="wrap_modal_mid">
                <div id="modalTitleBar" class="modalTitleBar">
                    <div id="modalCloseButton">
                        <img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/modalCloseButton.png&contentType=png" id="closeConfirmPopup" onclick="javascript:hideErrorAlertScreen();" onMouseOver="closeConfirmPopup.src='/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/modalCloseButton_hover.png&contentType=png'" onMouseOut="closeConfirmPopup.src='/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&resPath=images/modalCloseButton.png&contentType=png'"/>
                    </div>
                    <#if (errorMsg?exists) >
		            	<h2>${loc.ERROR_MESSAGE_TITLE}</h2>
		            </#if>
		            <#if (successMsg?exists) >
		            	<h2>${loc.SUCCESS_MESSAGE_TITLE}</h2>
		            </#if>
		            <#if (pendingMsg?exists) >
		            	<h2>${loc.PENDING_CAS_TITLE}</h2>
		            </#if>
                </div>
                <div id="serviceDetailsArea">
                    <div class="info_alert">
                        <div class="info_alert_top"></div>
                        <div class="info_alert_mid">
                            <table>
                                <tr><td>
                                        <div class="info_alert_mid_left">
	                                	<#if (errorMsg?exists) >
							            	<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/modal_denied.jpg&contentType=jpg" />
							            </#if>
							            <#if (successMsg?exists) >
							           		<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/modal_info_icon.jpg&contentType=jpg" />
							            </#if>
							            <#if (pendingMsg?exists) >
							           		<img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&resPath=images/modal_info_icon.jpg&contentType=jpg" />
							            </#if>
                                        </div>
                                    </td><td>
                                        <div class="info_alert_mid_right" id="divInfoAlertMessage">
                                        <#if (errorMsg?exists) >
							            	<p class="info_text" id="pInfoAlertMessage">${errorMsg}</p>
							            </#if>
							            <#if (successMsg?exists) >
							           		<p class="info_text" id="pInfoAlertMessage">${successMsg}</p>
							            </#if>
							            <#if (pendingMsg?exists) >
							           		<p class="info_text" id="pInfoAlertMessage">${pendingMsg}</p>
							            </#if>
                                        </div>
                                    </td></tr></table>
                        </div>
                        <div class="info_alert_bottom"></div>
                    </div>
                    <div class="btnHolder">
                        <div class="blueBtn" id="divWithOkButton">
                            <div class="blueBtnLeft"></div>
                            <div class="blueBtnMid">
                                <a href="#" onclick="javascript:hideErrorAlertScreen();">${loc.CONFIGURATION_BUTTON_OK}</a>
                            </div>
                            <div class="blueBtnRight"></div>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="wrap_modal_bottom"></div>
        </div>
        </#if>
        <div id="confirmWrapper" class="modalWrapper_small" style="display:none;">
            <div class="wrap_modal_top"></div>
            <div id="wrapBig" class="wrap_modal_mid">
                <div id="modalTitleBar" class="modalTitleBar">
                    <p id="objectid"  style="display:none;"></p>
                    <p id="groupid"  style="display:none;"></p>
                    <p id="jsonparameters"  style="display:none;"></p>
                    <p id="jsonparametersExtraCost"  style="display:none;"></p>
                    <p id="jsonParametersChargeableMsg"  style="display:none;"></p>
                    <p id="selectedServerNameForOrdering"  style="display:none;"></p>
                    <p id="selectedServerGroupNameForOrdering"  style="display:none;"></p>
                    <p id="selectedServerBaseValues"  style="display:none;"></p>
                    <p id="selectedServerRetrievedSlideValuesFromResponse"  style="display:none;"></p>
                    <div id="modalCloseButton">
                        <img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&resPath=images/modalCloseButton.png&contentType=png" id="closeConfirmPopup" onclick="javascript:hideConfirmScreen();" onMouseOver="closeConfirmPopup.src='/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&resPath=images/modalCloseButton_hover.png&contentType=png'" onMouseOut="closeConfirmPopup.src='/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&resPath=images/modalCloseButton.png&contentType=png'"/>
                    </div>
                    <h2>${loc.SNAPSHOT_CONFIRMATION_TITLE}</h2>
                </div>
                <div id="productDetailsArea">
                    <div id="productImage"><img src="/ap4saasWeb/seam/resource/logoServlet?serviceId=${serviceVO.serviceId}&userId=${loginUserVO.saasUserId?string('0')}" width="66" height="65" /></div>
                    <div id="productName"><b>${serviceVO.productName}</b></div>
                </div>
                <div id="serviceDetailsArea">
                    <div class="info_alert">
                        <div class="info_alert_top"></div>
                        <div class="info_alert_mid">
                            <table><tr><td>
                                        <div class="info_alert_mid_left"><img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=${serviceVO.actualServiceName}&resPath=images/modal_info_icon.jpg&contentType=jpg" /></div>
                                    </td><td>
                                        <div class="info_alert_mid_right" id="divInfoAlertMessage">
                                            <p class="info_text" id="pConfirmMessage"> to be replaced in js </p>
                                        </div>
                                    </td></tr></table>
                        </div>
                        <div class="info_alert_bottom"></div>
                    </div>
                    <div class="btnHolder">
                        <div class="blueBtn" id="divConfirmWithOkButton">
                            <div class="blueBtnLeft"></div>
                            <div class="blueBtnMid">
                                <a href="#" onclick="javascript:popupScreenChoosen('OK','');">${loc.CONFIGURATION_BUTTON_OK}</a>
                            </div>
                            <div class="blueBtnRight"></div>
                        </div>
                        <div class="blueBtn" id="divConfirmWithYesButton">
                            <div class="blueBtnLeft"></div>
                            <div class="blueBtnMid">
                                <a href="#" class="needShowLoading" onclick="javascript:popupScreenChoosen('YES','/ap4saasWeb/seam/resource/pluginProcessor?serviceId=${serviceVO.serviceId}&userId=${userVO.saasUserId?c}&subscriptionInstanceId=${serviceVO.serviceInstanceId}&operationName=configuration-detail&navigationClassName=AddToCart');">${loc.CONFIGURATION_BUTTON_YES}</a>
                            </div>
                            <div class="blueBtnRight"></div>
                        </div>
                        <div class="blueBtn" id="divGroupConfirmWithYesButton">
                            <div class="blueBtnLeft"></div>
                            <div class="blueBtnMid">
                                <a href="#" class="needShowLoading" onclick="javascript:popupScreenForGroup('/ap4saasWeb/seam/resource/pluginProcessor?serviceId=${serviceVO.serviceId}&userId=${userVO.saasUserId?c}&subscriptionInstanceId=${serviceVO.serviceInstanceId}&operationName=configuration-detail&navigationClassName=GroupOrderConfirm');">${loc.CONFIGURATION_BUTTON_YES}</a>
                            </div>
                            <div class="blueBtnRight"></div>
                        </div>
                        <div class="blackBtn" id="divConfirmWithNoButton">
                            <div class="blackBtnLeft"></div>
                            <div class="blackBtnMid"><a href="#" onclick="javascript:popupScreenChoosen('NO','');">${loc.CONFIGURATION_BUTTON_NO}</a></div>
                            <div class="blackBtnRight"></div>
                        </div>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="wrap_modal_bottom"></div>
        </div>
        <!-- div for wait animation -->
        <div id="loadingDiv" align="center" style="width:100%; height:100%;display:none;">
            <br /><br /><br /><br /><br /><br />
            <img src="/ap4saasWeb/seam/resource/resourceLoader?actualServiceName=IaaSDomainAdapter&function=usage&resPath=images/loading.gif&contentType=gif" />
        </div>
        <script type="text/javascript">
            jQuery(document).ready(
            function() {
                jQuery("input[type=button].iaas_appr_save").click(
                function() {
                    jQuery("#loadingDiv").showLoading();
                }
            );
                jQuery('a.needShowLoading').click(
                function() {
                    jQuery('#loadingDiv').showLoading();
                }
            );
            }
        );
        </script>
        
        <script language="javascript">
            <#if (errorMsg?exists)  || (pendingMsg?exists)>
            	displayAndSetPositionOfErrorScreen();
            </#if>
            objectGroupChanged();
            var minHeight = 400; // min height for iframe
            resetFrameHeight(0);
				
			
        </script>
    </body>
</html>